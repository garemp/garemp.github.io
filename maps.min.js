var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.owns=function(c,b){return Object.prototype.hasOwnProperty.call(c,b)};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.SIMPLE_FROUND_POLYFILL=!1;$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(c,b,a){c!=Array.prototype&&c!=Object.prototype&&(c[b]=a.value)};
$jscomp.getGlobal=function(c){c=["object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global,c];for(var b=0;b<c.length;++b){var a=c[b];if(a&&a.Math==Math)return a}throw Error("Cannot find global object");};$jscomp.global=$jscomp.getGlobal(this);
$jscomp.polyfill=function(c,b,a,d){if(b){a=$jscomp.global;c=c.split(".");for(d=0;d<c.length-1;d++){var e=c[d];e in a||(a[e]={});a=a[e]}c=c[c.length-1];d=a[c];b=b(d);b!=d&&null!=b&&$jscomp.defineProperty(a,c,{configurable:!0,writable:!0,value:b})}};$jscomp.polyfill("Object.values",function(c){return c?c:function(b){var a=[],c;for(c in b)$jscomp.owns(b,c)&&a.push(b[c]);return a}},"es8","es3");$jscomp.arrayIteratorImpl=function(c){var b=0;return function(){return b<c.length?{done:!1,value:c[b++]}:{done:!0}}};
$jscomp.arrayIterator=function(c){return{next:$jscomp.arrayIteratorImpl(c)}};$jscomp.SYMBOL_PREFIX="jscomp_symbol_";$jscomp.initSymbol=function(){$jscomp.initSymbol=function(){};$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol)};$jscomp.SymbolClass=function(c,b){this.$jscomp$symbol$id_=c;$jscomp.defineProperty(this,"description",{configurable:!0,writable:!0,value:b})};$jscomp.SymbolClass.prototype.toString=function(){return this.$jscomp$symbol$id_};
$jscomp.Symbol=function(){function c(a){if(this instanceof c)throw new TypeError("Symbol is not a constructor");return new $jscomp.SymbolClass($jscomp.SYMBOL_PREFIX+(a||"")+"_"+b++,a)}var b=0;return c}();
$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();var c=$jscomp.global.Symbol.iterator;c||(c=$jscomp.global.Symbol.iterator=$jscomp.global.Symbol("Symbol.iterator"));"function"!=typeof Array.prototype[c]&&$jscomp.defineProperty(Array.prototype,c,{configurable:!0,writable:!0,value:function(){return $jscomp.iteratorPrototype($jscomp.arrayIteratorImpl(this))}});$jscomp.initSymbolIterator=function(){}};
$jscomp.initSymbolAsyncIterator=function(){$jscomp.initSymbol();var c=$jscomp.global.Symbol.asyncIterator;c||(c=$jscomp.global.Symbol.asyncIterator=$jscomp.global.Symbol("Symbol.asyncIterator"));$jscomp.initSymbolAsyncIterator=function(){}};$jscomp.iteratorPrototype=function(c){$jscomp.initSymbolIterator();c={next:c};c[$jscomp.global.Symbol.iterator]=function(){return this};return c};
$jscomp.iteratorFromArray=function(c,b){$jscomp.initSymbolIterator();c instanceof String&&(c+="");var a=0,d={next:function(){if(a<c.length){var e=a++;return{value:b(e,c[e]),done:!1}}d.next=function(){return{done:!0,value:void 0}};return d.next()}};d[Symbol.iterator]=function(){return d};return d};$jscomp.polyfill("Array.prototype.values",function(c){return c?c:function(){return $jscomp.iteratorFromArray(this,function(b,a){return a})}},"es8","es3");
$jscomp.checkEs6ConformanceViaProxy=function(){try{var c={},b=Object.create(new $jscomp.global.Proxy(c,{get:function(a,d,e){return a==c&&"q"==d&&e==b}}));return!0===b.q}catch(a){return!1}};$jscomp.USE_PROXY_FOR_ES6_CONFORMANCE_CHECKS=!1;$jscomp.ES6_CONFORMANCE=$jscomp.USE_PROXY_FOR_ES6_CONFORMANCE_CHECKS&&$jscomp.checkEs6ConformanceViaProxy();$jscomp.makeIterator=function(c){var b="undefined"!=typeof Symbol&&Symbol.iterator&&c[Symbol.iterator];return b?b.call(c):$jscomp.arrayIterator(c)};
$jscomp.polyfill("WeakMap",function(c){function b(){if(!c||!Object.seal)return!1;try{var a=Object.seal({}),b=Object.seal({}),d=new c([[a,2],[b,3]]);if(2!=d.get(a)||3!=d.get(b))return!1;d.delete(a);d.set(b,4);return!d.has(a)&&4==d.get(b)}catch(n){return!1}}function a(){}function d(a){var b=typeof a;return"object"===b&&null!==a||"function"===b}function e(b){if(!$jscomp.owns(b,f)){var c=new a;$jscomp.defineProperty(b,f,{value:c})}}function h(b){var c=Object[b];c&&(Object[b]=function(b){if(b instanceof
a)return b;e(b);return c(b)})}if($jscomp.USE_PROXY_FOR_ES6_CONFORMANCE_CHECKS){if(c&&$jscomp.ES6_CONFORMANCE)return c}else if(b())return c;var f="$jscomp_hidden_"+Math.random();h("freeze");h("preventExtensions");h("seal");var k=0,l=function(a){this.id_=(k+=Math.random()+1).toString();if(a){a=$jscomp.makeIterator(a);for(var b;!(b=a.next()).done;)b=b.value,this.set(b[0],b[1])}};l.prototype.set=function(a,b){if(!d(a))throw Error("Invalid WeakMap key");e(a);if(!$jscomp.owns(a,f))throw Error("WeakMap key fail: "+
a);a[f][this.id_]=b;return this};l.prototype.get=function(a){return d(a)&&$jscomp.owns(a,f)?a[f][this.id_]:void 0};l.prototype.has=function(a){return d(a)&&$jscomp.owns(a,f)&&$jscomp.owns(a[f],this.id_)};l.prototype.delete=function(a){return d(a)&&$jscomp.owns(a,f)&&$jscomp.owns(a[f],this.id_)?delete a[f][this.id_]:!1};return l},"es6","es3");$jscomp.MapEntry=function(){};
$jscomp.polyfill("Map",function(c){function b(){if($jscomp.ASSUME_NO_NATIVE_MAP||!c||"function"!=typeof c||!c.prototype.entries||"function"!=typeof Object.seal)return!1;try{var a=Object.seal({x:4}),b=new c($jscomp.makeIterator([[a,"s"]]));if("s"!=b.get(a)||1!=b.size||b.get({x:4})||b.set({x:4},"t")!=b||2!=b.size)return!1;var d=b.entries(),e=d.next();if(e.done||e.value[0]!=a||"s"!=e.value[1])return!1;e=d.next();return e.done||4!=e.value[0].x||"t"!=e.value[1]||!d.next().done?!1:!0}catch(n){return!1}}
if($jscomp.USE_PROXY_FOR_ES6_CONFORMANCE_CHECKS){if(c&&$jscomp.ES6_CONFORMANCE)return c}else if(b())return c;$jscomp.initSymbolIterator();var a=new WeakMap,d=function(a){this.data_={};this.head_=f();this.size=0;if(a){a=$jscomp.makeIterator(a);for(var b;!(b=a.next()).done;)b=b.value,this.set(b[0],b[1])}};d.prototype.set=function(a,b){a=0===a?0:a;var c=e(this,a);c.list||(c.list=this.data_[c.id]=[]);c.entry?c.entry.value=b:(c.entry={next:this.head_,previous:this.head_.previous,head:this.head_,key:a,
value:b},c.list.push(c.entry),this.head_.previous.next=c.entry,this.head_.previous=c.entry,this.size++);return this};d.prototype.delete=function(a){a=e(this,a);return a.entry&&a.list?(a.list.splice(a.index,1),a.list.length||delete this.data_[a.id],a.entry.previous.next=a.entry.next,a.entry.next.previous=a.entry.previous,a.entry.head=null,this.size--,!0):!1};d.prototype.clear=function(){this.data_={};this.head_=this.head_.previous=f();this.size=0};d.prototype.has=function(a){return!!e(this,a).entry};
d.prototype.get=function(a){return(a=e(this,a).entry)&&a.value};d.prototype.entries=function(){return h(this,function(a){return[a.key,a.value]})};d.prototype.keys=function(){return h(this,function(a){return a.key})};d.prototype.values=function(){return h(this,function(a){return a.value})};d.prototype.forEach=function(a,b){for(var c=this.entries(),d;!(d=c.next()).done;)d=d.value,a.call(b,d[1],d[0],this)};d.prototype[Symbol.iterator]=d.prototype.entries;var e=function(b,c){var d=c&&typeof c;"object"==
d||"function"==d?a.has(c)?d=a.get(c):(d=""+ ++k,a.set(c,d)):d="p_"+c;var e=b.data_[d];if(e&&$jscomp.owns(b.data_,d))for(b=0;b<e.length;b++){var f=e[b];if(c!==c&&f.key!==f.key||c===f.key)return{id:d,list:e,index:b,entry:f}}return{id:d,list:e,index:-1,entry:void 0}},h=function(a,b){var c=a.head_;return $jscomp.iteratorPrototype(function(){if(c){for(;c.head!=a.head_;)c=c.previous;for(;c.next!=c.head;)return c=c.next,{done:!1,value:b(c)};c=null}return{done:!0,value:void 0}})},f=function(){var a={};return a.previous=
a.next=a.head=a},k=0;return d},"es6","es3");$jscomp.checkStringArgs=function(c,b,a){if(null==c)throw new TypeError("The 'this' value for String.prototype."+a+" must not be null or undefined");if(b instanceof RegExp)throw new TypeError("First argument to String.prototype."+a+" must not be a regular expression");return c+""};
$jscomp.polyfill("String.prototype.startsWith",function(c){return c?c:function(b,a){var c=$jscomp.checkStringArgs(this,b,"startsWith");b+="";var e=c.length,h=b.length;a=Math.max(0,Math.min(a|0,c.length));for(var f=0;f<h&&a<e;)if(c[a++]!=b[f++])return!1;return f>=h}},"es6","es3");var s,loaded=0,mobile_dev=!1;uselent=drawcvco=!0;sigma.utils.pkg("sigma.canvas.nodes");
sigma.canvas.nodes.image=function(){var c={},b={},a={},d=function(a,b,d){var e=arguments,f=d("prefix")||"",h=a[f+"size"];a.color||d("defaultNodeColor");var m=a.url;c[m]?(b.save(),b.beginPath(),b.arc(a[f+"x"],a[f+"y"],a[f+"size"],0,2*Math.PI,!0),b.closePath(),b.clip(),b.drawImage(c[m],a[f+"x"]-h,a[f+"y"]-h,2*h,2*h),b.restore()):(sigma.canvas.nodes.image.cache(m),sigma.canvas.nodes.def.apply(sigma.canvas.nodes,e))};d.cache=function(d,h){h&&(a[d]=h);if(!b[d]){var e=new Image;e.onload=function(){b[d]=
!1;c[d]=e;a[d]&&(a[d].call(this,e),delete a[d])};b[d]=!0;e.src=d}};return d}();var filter;urls="img/gbo.png img/gcm.png img/gmc.png img/ggb.png img/gbg.png img/ggo.png img/gog.png img/ggy.png img/gyb.png img/gby.png img/gyo.png img/goy.png img/gpb-g.png img/gpb,g.png img/gpb-m.png img/gpb,m.png img/gpg-b.png img/gpg,b.png img/gpg-m.png img/gpg,m.png img/gpm-b.png img/gpm,b.png img/gpm-g.png img/gpm,g.png img/gpr,m.png img/gpr-y.png img/gpm,c.png img/gpc-m.png img/r,m.png img/r,y.png img/g,y.png img/c,m.png img/y,m.png img/g-r.png img/g-rk.png img/gray-r.png img/gray-rk.png img/gray-o.png img/gray-ok.png img/m-o.png img/mby.png img/moby.png img/b,o.png img/mbo.png img/bok.png img/mbok.png img/r,c.png img/c,r.png img/ryk.png img/icosa.png".split(" ");
function updateColorinfo(c,b){$("#colorinfo-pane").empty();mobile_dev&&$("#color-count-info-pane").css({bottom:parseInt($("#drawcvco").css("height"))+20+"px"});$("#colorinfo-pane").append("<div id='legend-title'><b>Legends</b></div>");var a=0;"developable surfaces"==c?($("#colorinfo-pane").append("<div class='circle' style='display:inline-block;background-color:"+colormap[0]+"''></div><div class='legend-text' style='display:inline-block'>&nbsp;&nbsp;&nbsp;cylindrical</div><br>"),$("#colorinfo-pane").append("<image src='img/r,y.png' height='20px' width='20px'><div class='legend-text' style='display:inline-block'>&nbsp;&nbsp;&nbsp;pseudocylindrical</div><br>"),
$("#colorinfo-pane").append("<div class='circle' style='display:inline-block;background-color:"+colormap[1]+"''></div><div class='legend-text' style='display:inline-block'>&nbsp;&nbsp;&nbsp;conic&nbsp;&nbsp;&nbsp;</div><image src='img/g,y.png' height='20px' width='20px'><div class='legend-text' style='display:inline-block'>&nbsp;&nbsp;&nbsp;<span title='some pseudoconic map projections&#10;are classified as conic in some references,&#10;e.g., Bonne, Werner, etc.'><u>pseudoconic</u></span></div><br>"),
$("#colorinfo-pane").append("<div class='circle' style='display:inline-block;background-color:"+colormap[2]+"''></div><div class='legend-text' style='display:inline-block'>&nbsp;&nbsp;&nbsp;azimuthal (partial blue disc </div><br>"),$("#colorinfo-pane").append("&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;means <span title='modifiedazimuthal in some references&#10;or ralated to azimuthal in CSISS'><u>azimuthal related</u></span>)<br>"),uselent&&$("#colorinfo-pane").append("<div class='circle' style='display:inline-block;background-color:"+
colormap[3]+"''></div><div class='legend-text' style='display:inline-block'>&nbsp;&nbsp;&nbsp;lenticular</div><br>"),$("#colorinfo-pane").append("<div class='circle' style='display:inline-block;background-color:#f88018''></div><div class='legend-text' style='display:inline-block'>&nbsp;&nbsp;&nbsp;polyconic</div><br>"),$("#colorinfo-pane").append("<image src='img/icosa.png' height='20px' width='20px'><div class='legend-text' style='display:inline-block'>&nbsp;&nbsp;&nbsp;polyhedral</div><br>"),$("#colorinfo-pane").append("<div class='circle' style='display:inline-block;background-color:#AAA''></div><div class='legend-text' style='display:inline-block'>&nbsp;&nbsp;&nbsp;miscellaneous</div><br>")):
"similar shape"==c?($("#colorinfo-pane").append("<image src='img/gray-r.png' height='20px' width='20px'><image src='img/g-r.png' height='20px' width='20px'><image src='img/g-rk.png' height='20px' width='20px'><div class='legend-text' style='display:inline-block'>&nbsp;&nbsp;&nbsp;similar shape</div><br>"),$("#colorinfo-pane").append("<image src='img/gray-o.png' height='20px' width='20px'><image src='img/gray-ok.png' height='20px' width='20px'><div class='legend-text' style='display:inline-block'>&nbsp;&nbsp;&nbsp;similar shape</div><br>"),
$("#colorinfo-pane").append("<div class='circle' style='display:inline-block;background-color:"+colormap[1]+"''></div><div class='legend-text' style='display:inline-block'>&nbsp;&nbsp;&nbsp;(may be) interrupted</div><br>"),$("#colorinfo-pane").append("<div class='circle' style='display:inline-block;background-color:"+colormap[2]+"''></div><div class='legend-text' style='display:inline-block'>&nbsp;&nbsp;&nbsp;Bonne group</div><br>"),$("#colorinfo-pane").append("<div class='circle' style='display:inline-block;background-color:"+
colormap[3]+"''></div><div class='legend-text' style='display:inline-block'>&nbsp;&nbsp;&nbsp;cylindrical equal-area family</div><br>"),$("#colorinfo-pane").append("<div class='circle' style='display:inline-block;background-color:"+colormap[4]+"''></div><div class='legend-text' style='display:inline-block'>&nbsp;&nbsp;&nbsp;stretching</div><br>")):("combinations"==c?($("#colorinfo-pane").append("<div class='circle' style='display:inline-block;background-color:"+colormap[0]+"''></div><div class='legend-text' style='display:inline-block'>&nbsp;&nbsp;&nbsp;source</div><br>"),
a=1):a=0,Object.values(b).forEach(function(b,c){"McBryde or McBT"==b?$("#colorinfo-pane").append("<div class='circle' style='display:inline-block;background-color:"+colormap[c+a]+"''></div><div title = 'McBT denotes McBryde-Thomas' class='legend-text' style='display:inline-block'>&nbsp;&nbsp;&nbsp;"+b+"</div><br>"):"other same shapes"==b?($("#colorinfo-pane").append("<image src='img/qmark.png' height='20px' width='20px'><div class='legend-text' style='display:inline-block'>&nbsp;&nbsp;&nbsp;bi-color discs represent</div><br>"),
$("#colorinfo-pane").append("&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;other cases of the same shape")):$("#colorinfo-pane").append("<div class='circle' style='display:inline-block;background-color:"+colormap[c+a]+"''></div><div class='legend-text' style='display:inline-block'>&nbsp;&nbsp;&nbsp;"+b+"</div><br>")}))}
function updateCountinfo(c){eds=s.renderers[0].edgesOnScreen;for(var b=0,a=0,d=0;d<eds.length;d++)"curvedArrow"==eds[d].type?b++:a++;0==c?$("#countinfo-pane").empty().append("<p class='countfont'>No node on screen.</p > "):1==c?0==b+a?$("#countinfo-pane").empty().append("<p class='countfont'>"+c+" node and no edges on screen.</p > "):1==b+a?1==b?$("#countinfo-pane").empty().append("<p class='countfont'>"+c+" node and "+(b+a)+" edge ("+b+" directed) on screen.</p > "):$("#countinfo-pane").empty().append("<p class='countfont'>"+
c+" node and "+(b+a)+" edge ("+a+" undirected) on screen.</p > "):0==a?$("#countinfo-pane").empty().append("<p class='countfont'>"+c+" node and "+(b+a)+" edges ("+b+" directed) on screen.</p > "):0==b?$("#countinfo-pane").empty().append("<p class='countfont'>"+c+" node and "+(b+a)+" edges ("+a+" undirected) on screen.</p > "):$("#countinfo-pane").empty().append("<p class='countfont'>"+c+" node and "+(b+a)+" edges ("+b+" directed and "+a+" undirected) on screen.</p > "):$("#countinfo-pane").empty().append("<p class='countfont'>"+
c+" nodes and "+(b+a)+" edges ("+b+" directed and "+a+" undirected) on screen.</p > ")}function genarray(c,b,a,d){for(;b<a;b+=d)c.push(b);return c}
$(function(){var c=[];genarray(c,-300,1500,50);genarray(c,1500,1800,15);genarray(c,1800,1900,2);genarray(c,1900,2021,1);$("#reset-year").click(function(){nodes=s.graph.nodes();edges=s.graph.edges();var a=0;for(i=0;i<nodes.length;i++)nodes[i].yearviz=!0,nodes[i].cat1viz&&nodes[i].cat2viz&&a++;filter.undo("yearrange").apply();updateCountinfo(a);$("#slider-range").slider("values",0,0);$("#slider-range").slider("values",1,c.length-1);a=c[$("#slider-range").slider("values",0)];var b=c[$("#slider-range").slider("values",
1)];0>b?$("#amount").val(-a+"BC - "+-b+"BC"):0>a?$("#amount").val(-a+"BC - "+b):$("#amount").val(a+" - "+b)});$("#slider-range").slider({range:!0,min:0,max:c.length-1,values:[0,c.length-1],slide:function(a,b){nodes=s.graph.nodes();edges=s.graph.edges();for(i=0;i<nodes.length;i++)nodes[i].yearviz=!0;$("#main-pane").empty();$("#minor-pane").empty();var d=c[b.values[0]],e=c[b.values[1]];0>e?$("#amount").val(-d+"BC - "+-e+"BC"):0>d?$("#amount").val(-d+"BC - "+e):$("#amount").val(d+" - "+e);var k=0;filter.undo("yearrange").nodesBy(function(a){var b=
!1;year=a.year;var c=/c.a./i;c.test(year)&&(year=year.replace("c.a.",""));year=parseInt(year);c=/BC/i;c.test(a.year)&&(year=-year);c=/and/i;c.test(a.year)?(split=a.year.split(" and "),y0=parseInt(split[0]),y1=parseInt(split[1]),y0>=d&&y0<=e&&(b=!0),y1>=d&&y1<=e&&(b=!0)):year>=d&&year<=e&&(b=!0);b&&a.cat1viz&&a.cat2viz&&k++;b||(a.yearviz=!1);return b},"yearrange").apply();updateCountinfo(k)}});var b=c[$("#slider-range").slider("values",0)],a=c[$("#slider-range").slider("values",1)];0>a?$("#amount").val(-b+
"BC - "+-a+"BC"):0>b?$("#amount").val(-b+"BC - "+a):$("#amount").val(b+" - "+a)});
var _={$:function(c){return document.getElementById(c)},all:function(c){return document.querySelectorAll(c)},removeClass:function(c,b){c=document.querySelectorAll(c);var a=c.length;for(i=0;i<a;i++){var d=c[i];d.className=d.className.replace(b,"")}},addClass:function(c,b){c=document.querySelectorAll(c);var a=c.length;for(i=0;i<a;i++){var d=c[i];-1==d.className.indexOf(b)&&(d.className+=" "+b)}},show:function(c){this.removeClass(c,"hidden")},hide:function(c){this.addClass(c,"hidden")},toggle:function(c,
b){b=b||"hidden";c=document.querySelectorAll(c);var a=c.length;for(i=0;i<a;i++){var d=c[i];-1!==d.className.indexOf(b)?d.className=d.className.replace(b,""):d.className+=" "+b}}},colormap="#c00 #0c0 #00c #c0c #0cc #cc0 #cff #ffc #cfc #ccc #ccc #ccc #333".split(" "),g={nodes:[],edges:[]};
urls.forEach(function(c){sigma.canvas.nodes.image.cache(c,function(){++loaded===urls.length&&(s=new sigma({graph:g,container:"graph-container",renderer:{container:document.getElementById("graph-container"),type:"canvas"},settings:{minNodeSize:8,maxNodeSize:16,enableEdgeHovering:!0,edgeHoverColor:"edge",defaultEdgeHoverColor:"#000",edgeHoverSizeRatio:1,edgeHoverExtremities:!0}}),s.bind("clickNode",function(b){$("#minor-pane").hide();drawcvco=0;$("#drawcvco").removeAttr("checked");node=b.data.node;
updatePane("#main-pane",node,!0)}),s.bind("clickEdge",function(b){nodes=s.graph.nodes();edges=s.graph.edges();node1=nodes[b.data.edge.s];node2=nodes[b.data.edge.t];updatePane("#main-pane",node1,!1);updatePane("#minor-pane",node2,!1);$("#minor-pane").append("<hr>");$("#minor-pane").append("<p>"+b.data.edge.desc+"</p>");drawcvco=0;$("#drawcvco").removeAttr("checked");for(j=0;j<edges.length;j++)edges[j].color=b.data.edge.id==edges[j].id?edges[j].defaultcolor:"#000";s.refresh()}),s.bind("clickStage",
function(b){$("#type-pane").hide();$("#prop-pane").hide();clean=!0;mobile_dev?$("#search-box").val(""):$("#search-box").focus().val("");offset=0;cur_neig=cur_node=null;$("#mapr-relmap").html("");$("#mapr-rel").html("");$("#mapr-reldiv").hide()}),sigma.parsers.json("maps.json",s,function(){filter=new sigma.plugins.filter(s);var b,a=s.graph.nodes(),c=a.length;for(b=0;b<c;b++)a[b].cat1viz=!0,a[b].cat2viz=!0,a[b].yearviz=!0;for(b=0;b<c;b++)a[b].size=7,a[b].color=a[b].center?"#333":"#AAA",a[b].colorf=
"#AAA",a[b].colorg="#AAA";c=s.graph.edges();var e=c.length;for(b=0;b<e;b++)c[b].type="curve",c[b].defaultcolor=c[b].color;s.refresh();for(b=0;b<e;b++)"curved"==c[b].attributes[0]&&(c[b].type="curvedArrow");s.refresh();updateCountinfo(a.length);nolegendfornodes()}))})});var type_append=!1,prop_append=!1;offset=0;cur_neig=cur_node=null;var clean=!0,nextptr=1,ptrlen=0,neighbor;
function updatePane(c,b,a){nodes=s.graph.nodes();edges=s.graph.edges();$(c).empty();mobile_dev&&$(c).css({top:parseInt($("#cat-l1").css("height"))+20+"px"});b.name?$(c).append('<h3 class="underline">'+b.name+"</h3>"):$(c).append('<h3 class="underline">'+b.label+" projection</h3>");b.alias&&$(c).append("<p>Alias: "+b.alias+"</p>");b.crby&&(b.year?$(c).append("<p>Created by "+b.crby+" in "+b.year+"</p>"):$(c).append("<p>Created by "+b.crby+"</p>"));var d="",e="";for(i=0;i<Object.values(b.attributes).length;i++){if("conformal"==
b.attributes[i]||"equal-area"==b.attributes[i]||"equidistant"==b.attributes[i]||"compromise"==b.attributes[i])e=e?e+(", "+b.attributes[i]):e+b.attributes[i];if("cylindrical"==b.attributes[i]||"pseudocylindrical"==b.attributes[i]||"conic"==b.attributes[i]||"pseudoconic"==b.attributes[i]||"azimuthal"==b.attributes[i]||"lenticular"==b.attributes[i])d+=b.attributes[i]}b.img&&$(c).append('<img src="'+b.img+'" width=100%></img>');d&&$(c).append("<p>Type: "+d+"</p>");e&&$(c).append("<p>Properties: "+e+"</p>");
$(c).show();if(a){nextptr=0;neighbor=b.neighbors;for(j=0;j<edges.length;j++)edges[j].color="#000";visnb=[];visedge=[];b.edges.forEach(function(a,c){0!=c&&(edges[a].color=edges[a].defaultcolor,vis=nodes[b.neighbors[c]].cat1viz&&nodes[b.neighbors[c]].cat2viz&&nodes[b.neighbors[c]].yearviz)&&(visnb.push(b.neighbors[c]),visedge.push(b.edges[c]))});ptrlen=Object.values(visedge).length;0!=ptrlen&&($(c).append('<hr><div id="show-rel" style="text-align:center"><button id="show-btn">show relations ('+ptrlen+
")</button></div>"),$(c).append('<div id="rel-area"</div>'),s.refresh(),$("#show-btn").click(function(){1<ptrlen?$("#show-btn").text("next relations"):$("#show-btn").hide();for(j=0;j<edges.length;j++)edges[j].color="#000";nextptr>=ptrlen&&(nextptr=0);edges[visedge[nextptr]].color=edges[visedge[nextptr]].defaultcolor;s.refresh();$("#rel-area").empty();$("#rel-area").append("<p><< see <b>"+nodes[visnb[nextptr]].label+" projection</b> ("+(nextptr+1)+"/"+ptrlen+") in left side panel</p>");1<ptrlen&&$("#rel-area").append('<div style="text-align:center"><button id="prev-btn">prev relations</button></div>');
$("#prev-btn").click(function(){nextptr--;nextptr--;0>nextptr&&(nextptr=ptrlen-1);$("#show-btn").click()});updatePane("#minor-pane",nodes[visnb[nextptr]],!1);$("#minor-pane").append("<hr>");$("#minor-pane").append("<p>"+edges[visedge[nextptr]].desc+"</p>");nextptr++}))}}function forceCleanNode(c){nodes=s.graph.nodes();for(j=0;j<nodes.length;j++)nodes[j].color="#AAA";s.refresh()}
function nolegendfornodes(){$("#colorinfo-pane").empty();mobile_dev&&$("#color-count-info-pane").css({bottom:parseInt($("#drawcvco").css("height"))+20+"px"});$("#colorinfo-pane").append("<div id='legend-title'><b>No Legend for Nodes</b></div>")}var sub_categories=new Map;sub_categories.set("developable surfaces","cylindrical conic azimuthal pseudocylindrical pseudoconic polyconic lenticular miscellaneous".split(" "));sub_categories.set("distortions",["conformal","equal-area","equidistant","compromise"]);
sub_categories.set("aspects (partial)",["normal","transverse","oblique"]);sub_categories.set("same shape",["2:1 ellipse","other same shapes"]);sub_categories.set("similar shape",["similar shape","(may be) interrupted","Bonne group","cylindrical equal-area family","stretching"]);sub_categories.set("form of parallels",["evenly spaced"]);sub_categories.set("form of meridians",["elliptical","sinusoidal","quartic","parabolic","hyperbolic"]);sub_categories.set("form of poles",["as straight lines","as points"]);
sub_categories.set("combinations",["fusion","blending","construction","Tobler hyperelliptical family"]);sub_categories.set("authors (inc. aliases)","Eckert;Kavrayskiy;Lambert;McBryde or McBT;Putni\u0146\u0161;Siemon;Strebe;Tobler;Wagner;Werenskiold;Winkel;Hufnagel's family".split(";"));
function catReset(){$("#main-pane").empty();$("#minor-pane").empty();var c=0;filter.undo("categories").nodesBy(function(b){b.cat1viz=!0;b.cat2viz=!0;b.yearviz&&c++;b.type="def";b.color="#AAA";b.colorf="#AAA";b.colorg="#AAA";return!0}).apply();updateCountinfo(c);nolegendfornodes();$("#cat-l1").val("all categories");$("#cat-l2").empty();$("#cat-l2").append("<option>no sub-categories</option>");$("#cat-l2").val("no sub-categories");$("#cat-more").val("== no more filters ==")}
function catFilter(c,b,a){var d=!1;a.colorf=0;for(i=a.colorg=0;i<Object.values(a.attributes).length;i++)Object.values(b).forEach(function(b,h){if("developable surfaces"==c)if("cylindrical"==a.attributes[i]?(d=!0,a.color=colormap[0]):"conic"==a.attributes[i]?(d=!0,a.color=colormap[1]):"azimuthal"==a.attributes[i]?(d=!0,a.color=colormap[2]):"pseudocylindrical"==a.attributes[i]?(d=!0,a.type="image",a.url="img/r,y.png",a.colorf="#CC0000",a.colorg="#CCCC00"):"pseudoconic"==a.attributes[i]?(d=!0,a.type=
"image",a.url="img/g,y.png",a.colorf="#00CC00",a.colorg="#CCCC00"):"pseudoazimuthal"==a.attributes[i]?(d=!0,a.type="image",a.url="img/mby.png"):"miscellaneous"==a.attributes[i]?(d=!0,a.color="#AAA"):"polyhedral"==a.attributes[i]&&(d=!0,a.type="image",a.url="img/icosa.png",a.colorf="#ffe119",a.colorg="#4363d8"),"Aitoff"==a.label||"Wagner 7"==a.label||"Wagner 8"==a.label||"Wagner 9"==a.label)d=!0,a.type="image",a.url=uselent?"img/mbo.png":"img/b,o.png",a.colorf="#00c",a.colorg="#f88018";else if("Hammer"==
a.label||"Winkel 3"==a.label)d=!0,a.type="image",a.url=uselent?"img/mbok.png":"img/bok.png",a.colorf="#00c",a.colorg="#f88018";else if("Ortelius Oval"==a.label||"Apian Globular I"==a.label||"Bacon Globular"==a.label)d=!0,a.type="image",a.url="img/ryk.png",a.colorf="#c00",a.colorg="#cc0";else if("Strebe 1995"==a.label)d=!0,a.type="image",a.url="img/m-o.png";else{if("Ciric I"==a.label||"A4"==a.label||"Dedistort"==a.label||"Briesemeister"==a.label||"Winkel 3 BOPC"==a.label)d=!0,a.color="#F0F"}else{if("same shape"==
c&&a.attributes[i].startsWith("same shape g")){val=a.attributes[i].substring(12);d=!0;a.type="image";a.url="img/g"+val+".png";switch(val.substring(0,1)){case "g":a.colorf="#3cb44b";break;case "y":a.colorf="#ffe119";break;case "b":a.colorf="#4363d8";break;case "o":a.colorf="#f58231";break;case "c":a.colorf="#42d4f4";break;case "m":a.colorf="#f032e6"}switch(val.substring(1)){case "g":a.colorg="#3cb44b";break;case "y":a.colorg="#ffe119";break;case "b":a.colorg="#4363d8";break;case "o":a.colorg="#f58231";
break;case "c":a.colorg="#42d4f4";break;case "m":a.colorg="#f032e6"}}if("similar shape"==c){a.attributes[i].startsWith("cylindrical equal-area")&&(d=!0,a.type="image",a.url="img/c,m.png",a.colorf="#00cccc",a.colorg="#cc00cc");"Sinusoidal"==a.label&&(d=!0,a.type="image",a.url="img/gpb,g.png",a.colorf="#0000cc",a.colorg="#00cc00");"Boggs eumorphic"==a.label&&(d=!0,a.type="image",a.url="img/g-r.png",a.colorf="#00cc00",a.colorg="#cc0000");"Siemon IV"==a.label&&(d=!0,a.type="image",a.url="img/g-rk.png",
a.colorf="#00cc00",a.colorg="#cc0000");if("Putni\u0146\u0161 P1"==a.label||"Putni\u0146\u0161 P2"==a.label)d=!0,a.type="image",a.url="img/gray-r.png",a.colorf="#ffe119",a.colorg="#cc0000";if("Putni\u0146\u0161 P3'"==a.label||"Putni\u0146\u0161 P4'"==a.label)d=!0,a.type="image",a.url="img/gray-ok.png",a.colorf="#ffe119",a.colorg="#f88018";if("Wagner 1"==a.label||"Wagner 2"==a.label||"Wagner 3"==a.label)d=!0,a.type="image",a.url="img/gray-o.png",a.colorf="#ffe119",a.colorg="#f88018"}if("combinations"==
c){if("fusion-src"==a.attributes[i]||"blending-src"==a.attributes[i]||"const-src"==a.attributes[i])d=!0,a.type="def",a.color=colormap[0];if("Hammer"==a.label||"Aitoff"==a.label)a.type="image",a.url="img/r,m.png",a.colorf="#CC0000",a.colorg="#CC00CC";"Mollweide"==a.label&&(a.type="image",a.url="img/r,c.png",a.colorf="#CC0000",a.colorg="#00CCCC");"Collignon"==a.label&&(a.type="image",a.url="img/c,r.png",a.colorf="#00CCCC",a.colorg="#CC0000")}a.attributes[i]==b&&(d=!0,"combinations"==c?(a.type="def",
a.color=colormap[h+1]):"distortions"==c?"Sinusoidal"==a.label||"Werner"==a.label?(a.type="image",a.url="img/gpb,g.png",a.colorf="#0000CC",a.colorg="#00CC00"):(a.type="def",a.color=colormap[h]):(a.type="def",a.color=colormap[h]))}});0==a.colorf&&(a.colorf=a.color);0==a.colorg&&(a.colorg=a.color);return{found:d,type:a.type,color:a.color,colorf:a.colorf,colorg:a.colorg,url:a.url}}
function catChange(){$("#main-pane").empty();$("#minor-pane").empty();nodes=s.graph.nodes();edges=s.graph.edges();sel=$(this).val();for(i=0;i<nodes.length;i++)nodes[i].cat1viz=!0;if("all categories"==sel)$("#cat-l2").empty(),$("#cat-l2").append("<option>no sub-categories</option>"),filter.undo("categories").nodesBy(function(a){a.type="def";a.type2=a.type;a.color="#AAA";a.color2=a.color;a.colorf=a.color;a.colorg=a.color;return a.cat2viz},"categories").apply(),updateCountinfo(nodes.length),nolegendfornodes();
else{var c=sub_categories.get(sel);$("#cat-l2").empty();$("#cat-l2").append("<option>all sub-categories</option>");Object.values(c).forEach(function(a){$("#cat-l2").append("<option>"+a+"</option>")});var b=0;filter.undo("categories").nodesBy(function(a){var d=!1;ret=catFilter(sel,c,a);ret.found&&(d=!0);a.type=ret.type;a.color=ret.color;a.url=ret.url;a.type2=ret.type;a.color2=ret.color;a.url2=ret.url;a.colorf=ret.colorf;a.colorg=ret.colorg;d||(a.cat1viz=!1);d&&a.cat2viz&&b++;return d&&a.cat2viz&&a.yearviz},
"categories").apply();updateCountinfo(b);updateColorinfo(sel,c)}}
function subcatChange(){$("#main-pane").empty();$("#minor-pane").empty();sel=$(this).val();idx=this.selectedIndex-1;for(i=0;i<nodes.length;i++)nodes[i].cat1viz=!0;if("all sub-categories"==sel){parsel=$("#cat-l1").val();var c=sub_categories.get(parsel),b=0;filter.undo("categories").nodesBy(function(a){var d=!1;ret=catFilter(parsel,c,a);ret.found&&(d=!0);a.type=ret.type;a.color=ret.color;a.url=ret.url;a.type2=ret.type;a.color2=ret.color;a.url2=ret.url;a.colorf=ret.colorf;a.colorg=ret.colorg;d||(a.cat1viz=
!1);d&&a.cat2viz&&b++;return d&&a.cat2viz&&a.yearviz},"categories").apply()}else b=0,filter.undo("categories").nodesBy(function(a){var c=!1;for(i=0;i<Object.values(a.attributes).length;i++){a.attributes[i]==sel&&(c=!0,a.type="def",a.color=colormap[idx],"fusion"==sel||"blending"==sel||"construction"==sel)&&(a.color=colormap[idx+1]);"cylindrical"==sel&&(a.color=colormap[0]);"conic"==sel&&(a.color=colormap[1]);"azimuthal"==sel&&(a.color=colormap[2]);"pseudocylindrical"==sel&&(a.type="image",a.url="img/r,y.png",
"Ortelius Oval"==a.label||"Apian Globular I"==a.label||"Bacon Globular"==a.label)&&(c=!0,a.type="image",a.url="img/ryk.png");"pseudoconic"==sel&&(a.type="image",a.url="img/g,y.png");"polyconic"==sel&&"Strebe 1995"==a.label&&(a.type="image",a.url="img/m-o.png");if("pseudoazimuthal"==sel){a.type="image";a.url="img/mby.png";if("Hammer"==a.label||"Winkel 3"==a.label)c=!0,a.type="image",a.url=uselent?"img/mbok.png":"img/bok.png";if("Aitoff"==a.label||"Wagner 7"==a.label||"Wagner 8"==a.label||"Wagner 9"==
a.label)a.type="image",a.url=uselent?"img/mbo.png":"img/b,o.png"}"miscellaneous"==sel&&(a.color="#AAA","Hammer"==a.label||"Winkel 3"==a.label)&&(a.type="image",a.url=uselent?"img/mbok.png":"img/bok.png");"polyhedral"==sel&&(a.type="image",a.url="img/icosa.png");if("equal-area"==sel||"equidistant"==sel)if("Sinusoidal"==a.label||"Werner"==a.label)a.type="image",a.url="img/gpb,g.png";"other same shapes"==sel&&a.attributes[i].startsWith("same shape g")&&(val=a.attributes[i].substring(12),c=!0,a.type=
"image",a.url="img/g"+val+".png");if("similar shape"==sel&&("Boggs eumorphic"==a.label||"Siemon IV"==a.label||"Putni\u0146\u0161 P1"==a.label||"Putni\u0146\u0161 P2"==a.label||"Putni\u0146\u0161 P3'"==a.label||"Putni\u0146\u0161 P4'"==a.label||"Wagner 1"==a.label||"Wagner 2"==a.label||"Wagner 3"==a.label)){"Boggs eumorphic"==a.label&&(c=!0,a.type="image",a.url="img/g-r.png");"Siemon IV"==a.label&&(c=!0,a.type="image",a.url="img/g-rk.png");if("Putni\u0146\u0161 P1"==a.label||"Putni\u0146\u0161 P2"==
a.label)c=!0,a.type="image",a.url="img/gray-r.png";if("Putni\u0146\u0161 P3'"==a.label||"Putni\u0146\u0161 P4'"==a.label)c=!0,a.type="image",a.url="img/gray-ok.png";if("Wagner 1"==a.label||"Wagner 2"==a.label||"Wagner 3"==a.label)c=!0,a.type="image",a.url="img/gray-o.png"}"(may be) interrupted"==sel&&("Sinusoidal"==a.label&&(c=!0,a.type="image",a.url="img/gpb,g.png"),"Boggs eumorphic"==a.label&&(c=!0,a.type="image",a.url="img/g-r.png"),"Siemon IV"==a.label&&(c=!0,a.type="image",a.url="img/g-rk.png"));
"Bonne group"==sel&&"Sinusoidal"==a.label&&(c=!0,a.type="image",a.url="img/gpb,g.png");"cylindrical equal-area family"!=sel&&"stretching"!=sel||!a.attributes[i].startsWith("cylindrical equal-area")||(c=!0,a.type="image",a.url="img/c,m.png");if("fusion"==sel&&"fusion-src"==a.attributes[i]||"blending"==sel&&"blending-src"==a.attributes[i]||"construction"==sel&&"const-src"==a.attributes[i]){if("fusion-src"==a.attributes[i]||"blending-src"==a.attributes[i]||"const-src"==a.attributes[i])c=!0,a.type="def",
a.color=colormap[0];if("Hammer"==a.label||"Aitoff"==a.label)a.type="image",a.url="img/r,m.png";"Mollweide"==a.label&&(a.type="image",a.url="img/r,c.png");"Collignon"==a.label&&(a.type="image",a.url="img/c,r.png")}}c||(a.cat1viz=!1);c&&a.cat2viz&&b++;return c&&a.cat2viz&&a.yearviz},"categories").apply();updateCountinfo(b)}
function morecatChange(){nodes=s.graph.nodes();edges=s.graph.edges();sel=$(this).val();for(i=0;i<nodes.length;i++)nodes[i].cat2viz=!0;if("== no more filters =="==sel){var c=0;filter.undo("categories").nodesBy(function(b){b.type=b.type2;b.color=b.color2;b.url=b.url2;b.cat1viz&&c++;return b.cat1viz},"categories").apply()}else c=0,filter.undo("categories").nodesBy(function(b){var a=!1;b.type=b.type2;b.color=b.color2;b.url=b.url2;for(i=0;i<Object.values(b.attributes).length;i++)b.attributes[i]==sel&&
(a=!0);a||(b.cat2viz=!1);a&&b.cat1viz&&c++;return a&&b.cat1viz&&b.yearviz},"categories").apply();updateCountinfo(c);s.refresh()}function search(){var c=$(this).val();c=new RegExp(c,"i");$(this).val("");forceCleanNode();nodes=s.graph.nodes();var b=!1;for(j=0;j<nodes.length;j++)c.test(nodes[j].label)&&(nodes[j].color="#c00",nodes[j].colorf="#c00",nodes[j].colorg="#c00",b=!0);b?s.refresh():$(this).val("not found!").select()}
$(document).ready(function(){$("#search-pane").css("left",parseInt($("#main-pane").css("width"))+30);$("#search-box").bind("change",search).focus();$("#cat-l1").change(catChange);$("#cat-l2").change(subcatChange);$("#cat-more").change(morecatChange);$("#reset-all").click(catReset);$("#zoom-vis").click(function(){s.refresh()});$("#uselent").change(function(){uselent=!uselent;$("#cat-more").empty();$("#cat-more").append("<option>== no more filters ==</option>");$("#cat-more").append("<option>cylindrical</option>");
$("#cat-more").append("<option>pseudocylindrical</option>");$("#cat-more").append("<option>conic</option>");$("#cat-more").append("<option>pseudoconic</option>");$("#cat-more").append("<option>azimuthal</option>");uselent&&$("#cat-more").append("<option>lenticular</option>");$("#cat-more").append("<option>== no more filters ==</option>");$("#cat-more").append("<option>conformal</option>");$("#cat-more").append("<option>equal-area</option>");$("#cat-more").append("<option>equidistant</option>");$("#cat-more").append("<option>compromise</option>");
$("#reset-all").click();uselent?sub_categories.set("developable surfaces","cylindrical conic azimuthal pseudocylindrical pseudoconic polyconic lenticular miscellaneous".split(" ")):sub_categories.set("developable surfaces","cylindrical conic azimuthal pseudocylindrical pseudoconic polyconic miscellaneous".split(" "))});$("#drawcvco").change(function(){nodes=s.graph.nodes();edges=s.graph.edges();if(drawcvco=!drawcvco)for(j=0;j<edges.length;j++)edges[j].color=edges[j].defaultcolor;else for(j=0;j<edges.length;j++)edges[j].color=
"#000";s.refresh()});$(".link").mouseover(function(a){$(".popup-div").not("#"+$(this).attr("id")+"-pane").hide();c=parseInt($(this).attr("height"));$("#"+$(this).attr("id")+"-pane").css({position:"absolute",top:a.pageY-20*c,left:a.pageX+10});$("#"+$(this).attr("id")+"-pane").stop().show()});$(".link").mouseout(function(){$("#"+$(this).attr("id")+"-pane").stop().fadeOut(3E3)});$(".popup-div").mouseover(function(){$(this).stop().fadeIn();return!1});$(".popup-div").mouseout(function(){$(this).stop().fadeOut(3E3);
return!1});$("#link-issue-pane").load("./issue.html");$("#link-auth-pane").load("./copyright.html");$("#link-hist-pane").load("./history.html");$("#link-source-pane").load("./source.html");$("#link-help-pane").load("./help.html");$(window).resize(function(){s.refresh()});$("#checkbox-pane").css({left:.8333*$("#copy-pane").width()+30});var c=$(document).height(),b=$(document).width();b<c?($("#tipfade").css({height:"150"}),$("#tipfade").html('<div style="text-align: center;position: relative;top:10%; font-size: 24px; color: #f4f0e4;">Warning: You may view on <span style="border: solid 1px;color: #f4f0e4;">mobile</span> device, some contents may be not optimized appropriately.</div>'),
mobile_dev=!0,$("#search-box").attr("disabled","disabled"),$("#search-text").attr("title","Search box is disabled temporarily on mobile device."),$("<br>").insertBefore("#uselent"),$("#button-pane").css({right:"10px"})):(1280>b||600>c)&&$("#tipfade").html('<div style="text-align: center;position: relative;top:10%; font-size: 24px; color: #f4f0e4;">Warning: Screen resolusion may be too <span style="border: solid 1px;color: #f4f0e4;">low</span> to render contents.</div>');1360!=b&&1366!=b&&1440!=b&&
1536!=b&&1600!=b&&1680!=b||768!=c&&800!=c&&864!=c&&900!=c&&1024!=c&&1050!=c?$("#tipfade").hide().fadeIn(2E3).delay(3E3).fadeOut(3E3):$("#tipfade").hide()});
