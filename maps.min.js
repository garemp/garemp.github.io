var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.owns=function(b,c){return Object.prototype.hasOwnProperty.call(b,c)};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.SIMPLE_FROUND_POLYFILL=!1;$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(b,c,a){b!=Array.prototype&&b!=Object.prototype&&(b[c]=a.value)};
$jscomp.getGlobal=function(b){b=["object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global,b];for(var c=0;c<b.length;++c){var a=b[c];if(a&&a.Math==Math)return a}return globalThis};$jscomp.global=$jscomp.getGlobal(this);$jscomp.polyfill=function(b,c,a,d){if(c){a=$jscomp.global;b=b.split(".");for(d=0;d<b.length-1;d++){var e=b[d];e in a||(a[e]={});a=a[e]}b=b[b.length-1];d=a[b];c=c(d);c!=d&&null!=c&&$jscomp.defineProperty(a,b,{configurable:!0,writable:!0,value:c})}};
$jscomp.polyfill("Object.values",function(b){return b?b:function(b){var a=[],c;for(c in b)$jscomp.owns(b,c)&&a.push(b[c]);return a}},"es8","es3");$jscomp.arrayIteratorImpl=function(b){var c=0;return function(){return c<b.length?{done:!1,value:b[c++]}:{done:!0}}};$jscomp.arrayIterator=function(b){return{next:$jscomp.arrayIteratorImpl(b)}};$jscomp.SYMBOL_PREFIX="jscomp_symbol_";$jscomp.initSymbol=function(){$jscomp.initSymbol=function(){};$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol)};
$jscomp.SymbolClass=function(b,c){this.$jscomp$symbol$id_=b;$jscomp.defineProperty(this,"description",{configurable:!0,writable:!0,value:c})};$jscomp.SymbolClass.prototype.toString=function(){return this.$jscomp$symbol$id_};$jscomp.Symbol=function(){function b(a){if(this instanceof b)throw new TypeError("Symbol is not a constructor");return new $jscomp.SymbolClass($jscomp.SYMBOL_PREFIX+(a||"")+"_"+c++,a)}var c=0;return b}();
$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();var b=$jscomp.global.Symbol.iterator;b||(b=$jscomp.global.Symbol.iterator=$jscomp.global.Symbol("Symbol.iterator"));"function"!=typeof Array.prototype[b]&&$jscomp.defineProperty(Array.prototype,b,{configurable:!0,writable:!0,value:function(){return $jscomp.iteratorPrototype($jscomp.arrayIteratorImpl(this))}});$jscomp.initSymbolIterator=function(){}};
$jscomp.initSymbolAsyncIterator=function(){$jscomp.initSymbol();var b=$jscomp.global.Symbol.asyncIterator;b||(b=$jscomp.global.Symbol.asyncIterator=$jscomp.global.Symbol("Symbol.asyncIterator"));$jscomp.initSymbolAsyncIterator=function(){}};$jscomp.iteratorPrototype=function(b){$jscomp.initSymbolIterator();b={next:b};b[$jscomp.global.Symbol.iterator]=function(){return this};return b};
$jscomp.iteratorFromArray=function(b,c){$jscomp.initSymbolIterator();b instanceof String&&(b+="");var a=0,d={next:function(){if(a<b.length){var e=a++;return{value:c(e,b[e]),done:!1}}d.next=function(){return{done:!0,value:void 0}};return d.next()}};d[Symbol.iterator]=function(){return d};return d};$jscomp.polyfill("Array.prototype.values",function(b){return b?b:function(){return $jscomp.iteratorFromArray(this,function(b,a){return a})}},"es8","es3");
$jscomp.checkEs6ConformanceViaProxy=function(){try{var b={},c=Object.create(new $jscomp.global.Proxy(b,{get:function(a,d,e){return a==b&&"q"==d&&e==c}}));return!0===c.q}catch(a){return!1}};$jscomp.USE_PROXY_FOR_ES6_CONFORMANCE_CHECKS=!1;$jscomp.ES6_CONFORMANCE=$jscomp.USE_PROXY_FOR_ES6_CONFORMANCE_CHECKS&&$jscomp.checkEs6ConformanceViaProxy();$jscomp.makeIterator=function(b){var c="undefined"!=typeof Symbol&&Symbol.iterator&&b[Symbol.iterator];return c?c.call(b):$jscomp.arrayIterator(b)};
$jscomp.polyfill("WeakMap",function(b){function c(){if(!b||!Object.seal)return!1;try{var a=Object.seal({}),c=Object.seal({}),d=new b([[a,2],[c,3]]);if(2!=d.get(a)||3!=d.get(c))return!1;d.delete(a);d.set(c,4);return!d.has(a)&&4==d.get(c)}catch(p){return!1}}function a(){}function d(a){var b=typeof a;return"object"===b&&null!==a||"function"===b}function e(b){if(!$jscomp.owns(b,f)){var c=new a;$jscomp.defineProperty(b,f,{value:c})}}function k(b){var c=Object[b];c&&(Object[b]=function(b){if(b instanceof
a)return b;e(b);return c(b)})}if($jscomp.USE_PROXY_FOR_ES6_CONFORMANCE_CHECKS){if(b&&$jscomp.ES6_CONFORMANCE)return b}else if(c())return b;var f="$jscomp_hidden_"+Math.random();k("freeze");k("preventExtensions");k("seal");var l=0,m=function(a){this.id_=(l+=Math.random()+1).toString();if(a){a=$jscomp.makeIterator(a);for(var b;!(b=a.next()).done;)b=b.value,this.set(b[0],b[1])}};m.prototype.set=function(a,b){if(!d(a))throw Error("Invalid WeakMap key");e(a);if(!$jscomp.owns(a,f))throw Error("WeakMap key fail: "+
a);a[f][this.id_]=b;return this};m.prototype.get=function(a){return d(a)&&$jscomp.owns(a,f)?a[f][this.id_]:void 0};m.prototype.has=function(a){return d(a)&&$jscomp.owns(a,f)&&$jscomp.owns(a[f],this.id_)};m.prototype.delete=function(a){return d(a)&&$jscomp.owns(a,f)&&$jscomp.owns(a[f],this.id_)?delete a[f][this.id_]:!1};return m},"es6","es3");$jscomp.MapEntry=function(){};
$jscomp.polyfill("Map",function(b){function c(){if($jscomp.ASSUME_NO_NATIVE_MAP||!b||"function"!=typeof b||!b.prototype.entries||"function"!=typeof Object.seal)return!1;try{var a=Object.seal({x:4}),c=new b($jscomp.makeIterator([[a,"s"]]));if("s"!=c.get(a)||1!=c.size||c.get({x:4})||c.set({x:4},"t")!=c||2!=c.size)return!1;var d=c.entries(),e=d.next();if(e.done||e.value[0]!=a||"s"!=e.value[1])return!1;e=d.next();return e.done||4!=e.value[0].x||"t"!=e.value[1]||!d.next().done?!1:!0}catch(p){return!1}}
if($jscomp.USE_PROXY_FOR_ES6_CONFORMANCE_CHECKS){if(b&&$jscomp.ES6_CONFORMANCE)return b}else if(c())return b;$jscomp.initSymbolIterator();var a=new WeakMap,d=function(a){this.data_={};this.head_=f();this.size=0;if(a){a=$jscomp.makeIterator(a);for(var b;!(b=a.next()).done;)b=b.value,this.set(b[0],b[1])}};d.prototype.set=function(a,b){a=0===a?0:a;var c=e(this,a);c.list||(c.list=this.data_[c.id]=[]);c.entry?c.entry.value=b:(c.entry={next:this.head_,previous:this.head_.previous,head:this.head_,key:a,
value:b},c.list.push(c.entry),this.head_.previous.next=c.entry,this.head_.previous=c.entry,this.size++);return this};d.prototype.delete=function(a){a=e(this,a);return a.entry&&a.list?(a.list.splice(a.index,1),a.list.length||delete this.data_[a.id],a.entry.previous.next=a.entry.next,a.entry.next.previous=a.entry.previous,a.entry.head=null,this.size--,!0):!1};d.prototype.clear=function(){this.data_={};this.head_=this.head_.previous=f();this.size=0};d.prototype.has=function(a){return!!e(this,a).entry};
d.prototype.get=function(a){return(a=e(this,a).entry)&&a.value};d.prototype.entries=function(){return k(this,function(a){return[a.key,a.value]})};d.prototype.keys=function(){return k(this,function(a){return a.key})};d.prototype.values=function(){return k(this,function(a){return a.value})};d.prototype.forEach=function(a,b){for(var c=this.entries(),d;!(d=c.next()).done;)d=d.value,a.call(b,d[1],d[0],this)};d.prototype[Symbol.iterator]=d.prototype.entries;var e=function(b,c){var d=c&&typeof c;"object"==
d||"function"==d?a.has(c)?d=a.get(c):(d=""+ ++l,a.set(c,d)):d="p_"+c;var e=b.data_[d];if(e&&$jscomp.owns(b.data_,d))for(b=0;b<e.length;b++){var f=e[b];if(c!==c&&f.key!==f.key||c===f.key)return{id:d,list:e,index:b,entry:f}}return{id:d,list:e,index:-1,entry:void 0}},k=function(a,b){var c=a.head_;return $jscomp.iteratorPrototype(function(){if(c){for(;c.head!=a.head_;)c=c.previous;for(;c.next!=c.head;)return c=c.next,{done:!1,value:b(c)};c=null}return{done:!0,value:void 0}})},f=function(){var a={};return a.previous=
a.next=a.head=a},l=0;return d},"es6","es3");$jscomp.checkStringArgs=function(b,c,a){if(null==b)throw new TypeError("The 'this' value for String.prototype."+a+" must not be null or undefined");if(c instanceof RegExp)throw new TypeError("First argument to String.prototype."+a+" must not be a regular expression");return b+""};
$jscomp.polyfill("String.prototype.startsWith",function(b){return b?b:function(b,a){var c=$jscomp.checkStringArgs(this,b,"startsWith");b+="";var e=c.length,k=b.length;a=Math.max(0,Math.min(a|0,c.length));for(var f=0;f<k&&a<e;)if(c[a++]!=b[f++])return!1;return f>=k}},"es6","es3");var s,loaded=0;drawcvco=!0;uselent=!1;sigma.utils.pkg("sigma.canvas.nodes");
sigma.canvas.nodes.image=function(){var b={},c={},a={},d=function(a,c,d){var e=arguments,f=d("prefix")||"",k=a[f+"size"];a.color||d("defaultNodeColor");var n=a.url;b[n]?(c.save(),c.beginPath(),c.arc(a[f+"x"],a[f+"y"],a[f+"size"],0,2*Math.PI,!0),c.closePath(),c.clip(),c.drawImage(b[n],a[f+"x"]-k,a[f+"y"]-k,2*k,2*k),c.restore()):(sigma.canvas.nodes.image.cache(n),sigma.canvas.nodes.def.apply(sigma.canvas.nodes,e))};d.cache=function(d,k){k&&(a[d]=k);if(!c[d]){var e=new Image;e.onload=function(){c[d]=
!1;b[d]=e;a[d]&&(a[d].call(this,e),delete a[d])};c[d]=!0;e.src=d}};return d}();var filter;urls="img/gpb-g.png img/gpb,g.png img/gpb-m.png img/gpb,m.png img/gpg-b.png img/gpg,b.png img/gpg-m.png img/gpg,m.png img/gpm-b.png img/gpm,b.png img/gpm-g.png img/gpm,g.png img/gpr,m.png img/gpr-y.png img/gpm,c.png img/gpc-m.png img/r,m.png img/r,y.png img/g,y.png img/c,m.png img/y,m.png img/g-r.png img/g-rk.png img/gray-r.png img/gray-rk.png img/gray-o.png img/gray-ok.png img/m-o.png img/mby.png img/moby.png img/b,o.png img/mbo.png img/bok.png img/mbok.png img/r,c.png img/c,r.png img/ryk.png img/icosa.png".split(" ");
function updateColorinfo(b,c){$("#colorinfo-pane").empty();$("#colorinfo-pane").append("<div id='legend-title'><b>Legends</b></div>");var a=0;"developable surfaces"==b?($("#colorinfo-pane").append("<div class='circle' style='display:inline-block;background-color:"+colormap[0]+"''></div><div class='legend-text' style='display:inline-block'>&nbsp;&nbsp;&nbsp;cylindrical</div><br>"),$("#colorinfo-pane").append("<div class='circle' style='display:inline-block;background-color:"+colormap[1]+"''></div><div class='legend-text' style='display:inline-block'>&nbsp;&nbsp;&nbsp;conic</div><br>"),
$("#colorinfo-pane").append("<div class='circle' style='display:inline-block;background-color:"+colormap[2]+"''></div><div class='legend-text' style='display:inline-block'>&nbsp;&nbsp;&nbsp;azimuthal (partial blue disc </div><br>"),$("#colorinfo-pane").append("&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;means <span title='modifiedazimuthal in some references&#10;or ralated to azimuthal in CSISS'><u>azimuthal related</u></span>)<br>"),$("#colorinfo-pane").append("<div class='circle' style='display:inline-block;background-color:"+
colormap[5]+"''></div><div class='legend-text' style='display:inline-block'>&nbsp;&nbsp;&nbsp;pseudo-(cylindrical or <span title='some pseudoconic map projections&#10;are classified as conic in some references,&#10;e.g., Bonne, Werner, etc.'><u>conic</u></span>)</div><br>"),uselent&&$("#colorinfo-pane").append("<div class='circle' style='display:inline-block;background-color:"+colormap[3]+"''></div><div class='legend-text' style='display:inline-block'>&nbsp;&nbsp;&nbsp;lenticular</div><br>"),$("#colorinfo-pane").append("<div class='circle' style='display:inline-block;background-color:#f88018''></div><div class='legend-text' style='display:inline-block'>&nbsp;&nbsp;&nbsp;polyconic</div><br>"),
$("#colorinfo-pane").append("<image src='img/icosa.png' height='20px' width='20px'><div class='legend-text' style='display:inline-block'>&nbsp;&nbsp;&nbsp;polyhedral</div><br>"),$("#colorinfo-pane").append("<div class='circle' style='display:inline-block;background-color:#000''></div><div class='legend-text' style='display:inline-block'>&nbsp;&nbsp;&nbsp;miscellaneous</div><br>")):"similar shape"==b?($("#colorinfo-pane").append("<image src='img/gray-r.png' height='20px' width='20px'><image src='img/g-r.png' height='20px' width='20px'><image src='img/g-rk.png' height='20px' width='20px'><div class='legend-text' style='display:inline-block'>&nbsp;&nbsp;&nbsp;similar shape</div><br>"),
$("#colorinfo-pane").append("<image src='img/gray-o.png' height='20px' width='20px'><image src='img/gray-ok.png' height='20px' width='20px'><div class='legend-text' style='display:inline-block'>&nbsp;&nbsp;&nbsp;similar shape</div><br>"),$("#colorinfo-pane").append("<div class='circle' style='display:inline-block;background-color:"+colormap[1]+"''></div><div class='legend-text' style='display:inline-block'>&nbsp;&nbsp;&nbsp;(may be) interrupted</div><br>"),$("#colorinfo-pane").append("<div class='circle' style='display:inline-block;background-color:"+
colormap[2]+"''></div><div class='legend-text' style='display:inline-block'>&nbsp;&nbsp;&nbsp;Bonne group</div><br>"),$("#colorinfo-pane").append("<div class='circle' style='display:inline-block;background-color:"+colormap[3]+"''></div><div class='legend-text' style='display:inline-block'>&nbsp;&nbsp;&nbsp;cylindrical equal-area family</div><br>"),$("#colorinfo-pane").append("<div class='circle' style='display:inline-block;background-color:"+colormap[4]+"''></div><div class='legend-text' style='display:inline-block'>&nbsp;&nbsp;&nbsp;stretching</div><br>")):
("combinations"==b?($("#colorinfo-pane").append("<div class='circle' style='display:inline-block;background-color:"+colormap[0]+"''></div><div class='legend-text' style='display:inline-block'>&nbsp;&nbsp;&nbsp;source</div><br>"),a=1):a=0,Object.values(c).forEach(function(b,c){"McBryde or McBT"==b?$("#colorinfo-pane").append("<div class='circle' style='display:inline-block;background-color:"+colormap[c+a]+"''></div><div title = 'McBT denotes McBryde-Thomas' class='legend-text' style='display:inline-block'>&nbsp;&nbsp;&nbsp;"+
b+"</div><br>"):"other same shapes"==b?($("#colorinfo-pane").append("<image src='img/qmark.png' height='20px' width='20px'><div class='legend-text' style='display:inline-block'>&nbsp;&nbsp;&nbsp;bi-color discs represent</div><br>"),$("#colorinfo-pane").append("&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;other cases of the same shape")):$("#colorinfo-pane").append("<div class='circle' style='display:inline-block;background-color:"+colormap[c+a]+"''></div><div class='legend-text' style='display:inline-block'>&nbsp;&nbsp;&nbsp;"+
b+"</div><br>")}))}
function updateCountinfo(b){eds=s.renderers[0].edgesOnScreen;for(var c=0,a=0,d=0;d<eds.length;d++)"curvedArrow"==eds[d].type?c++:a++;0==b?$("#countinfo-pane").empty().append("<p class='countfont'>No node on screen.</p > "):1==b?0==c+a?$("#countinfo-pane").empty().append("<p class='countfont'>"+b+" node and no edges on screen.</p > "):1==c+a?1==c?$("#countinfo-pane").empty().append("<p class='countfont'>"+b+" node and "+(c+a)+" edge ("+c+" directed) on screen.</p > "):$("#countinfo-pane").empty().append("<p class='countfont'>"+b+
" node and "+(c+a)+" edge ("+a+" undirected) on screen.</p > "):0==a?$("#countinfo-pane").empty().append("<p class='countfont'>"+b+" node and "+(c+a)+" edges ("+c+" directed) on screen.</p > "):0==c?$("#countinfo-pane").empty().append("<p class='countfont'>"+b+" node and "+(c+a)+" edges ("+a+" undirected) on screen.</p > "):$("#countinfo-pane").empty().append("<p class='countfont'>"+b+" node and "+(c+a)+" edges ("+c+" directed and "+a+" undirected) on screen.</p > "):$("#countinfo-pane").empty().append("<p class='countfont'>"+
b+" nodes and "+(c+a)+" edges ("+c+" directed and "+a+" undirected) on screen.</p > ")}function genarray(b,c,a,d){for(;c<a;c+=d)b.push(c);return b}
$(function(){var b=[];genarray(b,-300,1500,50);genarray(b,1500,1800,15);genarray(b,1800,1900,2);genarray(b,1900,2021,1);$("#reset-year").click(function(){nodes=s.graph.nodes();edges=s.graph.edges();for(i=0;i<nodes.length;i++)nodes[i].yearviz=!0;filter.undo("yearrange").apply();$("#slider-range").slider("values",0,0);$("#slider-range").slider("values",1,b.length-1);var a=b[$("#slider-range").slider("values",0)],c=b[$("#slider-range").slider("values",1)];0>c?$("#amount").val(-a+"BC - "+-c+"BC"):0>a?
$("#amount").val(-a+"BC - "+c):$("#amount").val(a+" - "+c)});$("#slider-range").slider({range:!0,min:0,max:b.length-1,values:[0,b.length-1],slide:function(a,c){for(i=0;i<nodes.length;i++)nodes[i].yearviz=!0;$("#main-pane").empty();$("#minor-pane").empty();var d=b[c.values[0]],e=b[c.values[1]];0>e?$("#amount").val(-d+"BC - "+-e+"BC"):0>d?$("#amount").val(-d+"BC - "+e):$("#amount").val(d+" - "+e);var l=0;filter.undo("yearrange").nodesBy(function(a){var c=!1;year=a.year;var b=/c.a./i;b.test(year)&&(year=
year.replace("c.a.",""));year=parseInt(year);b=/BC/i;b.test(a.year)&&(year=-year);b=/and/i;b.test(a.year)?(split=a.year.split(" and "),y0=parseInt(split[0]),y1=parseInt(split[1]),y0>=d&&y0<=e&&(c=!0),y1>=d&&y1<=e&&(c=!0)):year>=d&&year<=e&&(c=!0);c&&l++;c||(a.yearviz=!1);return c},"yearrange").apply();updateCountinfo(l)}});var c=b[$("#slider-range").slider("values",0)],a=b[$("#slider-range").slider("values",1)];0>a?$("#amount").val(-c+"BC - "+-a+"BC"):0>c?$("#amount").val(-c+"BC - "+a):$("#amount").val(c+
" - "+a)});
var _={$:function(b){return document.getElementById(b)},all:function(b){return document.querySelectorAll(b)},removeClass:function(b,c){b=document.querySelectorAll(b);var a=b.length;for(i=0;i<a;i++){var d=b[i];d.className=d.className.replace(c,"")}},addClass:function(b,c){b=document.querySelectorAll(b);var a=b.length;for(i=0;i<a;i++){var d=b[i];-1==d.className.indexOf(c)&&(d.className+=" "+c)}},show:function(b){this.removeClass(b,"hidden")},hide:function(b){this.addClass(b,"hidden")},toggle:function(b,c){c=
c||"hidden";b=document.querySelectorAll(b);var a=b.length;for(i=0;i<a;i++){var d=b[i];-1!==d.className.indexOf(c)?d.className=d.className.replace(c,""):d.className+=" "+c}}},colormap="#c00 #0c0 #00c #c0c #0cc #cc0 #cff #ffc #cfc #ccc #ccc #ccc #333".split(" "),g={nodes:[],edges:[]};
urls.forEach(function(b){sigma.canvas.nodes.image.cache(b,function(){++loaded===urls.length&&(s=new sigma({graph:g,container:"graph-container",renderer:{container:document.getElementById("graph-container"),type:"canvas"},settings:{minNodeSize:8,maxNodeSize:16,enableEdgeHovering:!0,edgeHoverColor:"edge",defaultEdgeHoverColor:"#000",edgeHoverSizeRatio:1,edgeHoverExtremities:!0}}),s.bind("clickNode",function(c){$("#minor-pane").hide();drawcvco=0;$("#drawcvco").removeAttr("checked");node=c.data.node;
updatePane("#main-pane",node,!0)}),s.bind("clickEdge",function(c){nodes=s.graph.nodes();edges=s.graph.edges();node1=nodes[c.data.edge.s];node2=nodes[c.data.edge.t];updatePane("#main-pane",node1,!1);updatePane("#minor-pane",node2,!1);$("#minor-pane").append("<hr>");$("#minor-pane").append("<p>"+c.data.edge.desc+"</p>");drawcvco=0;$("#drawcvco").removeAttr("checked");for(j=0;j<edges.length;j++)edges[j].color=c.data.edge.id==edges[j].id?edges[j].defaultcolor:"#000";s.refresh()}),s.bind("clickStage",
function(c){$("#type-pane").hide();$("#prop-pane").hide();$("#list-box").val("------\u8bf7\u9009\u62e9------");clean=!0;$("#legend-pane").hide();$("#search-box").focus().val("");offset=0;cur_neig=cur_node=null;$("#mapr-relmap").html("");$("#mapr-rel").html("");$("#mapr-reldiv").hide()}),sigma.parsers.json("maps.json",s,function(){filter=new sigma.plugins.filter(s);var c,a=s.graph.nodes(),b=a.length;for(c=0;c<b;c++)a[c].cat1viz=!0,a[c].cat2viz=!0,a[c].yearviz=!0;for(c=0;c<b;c++)a[c].color=a[c].center?
"#333":"#666";a=s.graph.edges();b=a.length;for(c=0;c<b;c++)a[c].type="curve",a[c].defaultcolor=a[c].color;$("#uselent").change();s.refresh();for(c=0;c<b;c++)"curved"==a[c].attributes[0]&&(a[c].type="curvedArrow");s.refresh();updateCountinfo(102);nolegendfornodes()}))})});var type_append=!1,prop_append=!1;offset=0;cur_neig=cur_node=null;var clean=!0,nextptr=1,ptrlen=0,neighbor;
function updatePane(b,c,a){nodes=s.graph.nodes();edges=s.graph.edges();$(b).empty();c.name?$(b).append('<h3 class="underline">'+c.name+"</h3>"):$(b).append('<h3 class="underline">'+c.label+" projection</h3>");c.alias&&$(b).append("<p>Alias: "+c.alias+"</p>");c.crby&&(c.year?$(b).append("<p>Created by "+c.crby+" in "+c.year+"</p>"):$(b).append("<p>Created by "+c.crby+"</p>"));var d="",e="";for(i=0;i<Object.values(c.attributes).length;i++){if("conformal"==c.attributes[i]||"equal-area"==c.attributes[i]||
"equidistant"==c.attributes[i]||"compromise"==c.attributes[i])e=e?e+(", "+c.attributes[i]):e+c.attributes[i];if("cylindrical"==c.attributes[i]||"pseudocylindrical"==c.attributes[i]||"conic"==c.attributes[i]||"pseudoconic"==c.attributes[i]||"azimuthal"==c.attributes[i]||"lenticular"==c.attributes[i])d+=c.attributes[i]}c.img&&$(b).append('<img src="'+c.img+'" width=100%></img>');d&&$(b).append("<p>Type: "+d+"</p>");e&&$(b).append("<p>Properties: "+e+"</p>");$(b).show();if(a){nextptr=0;neighbor=c.neighbors;
for(j=0;j<edges.length;j++)edges[j].color="#000";visnb=[];visedge=[];c.edges.forEach(function(a,b){0!=b&&(edges[a].color=edges[a].defaultcolor,vis=nodes[c.neighbors[b]].cat1viz&&nodes[c.neighbors[b]].cat2viz&&nodes[c.neighbors[b]].yearviz)&&(visnb.push(c.neighbors[b]),visedge.push(c.edges[b]))});ptrlen=Object.values(visedge).length;0!=ptrlen&&($(b).append('<hr><div id="show-rel" style="text-align:center"><button id="show-btn">show relations</button></div>'),$(b).append('<div id="rel-area"</div>'),
s.refresh(),$("#show-btn").click(function(){1<ptrlen?$("#show-btn").text("next relations"):$("#show-btn").hide();for(j=0;j<edges.length;j++)edges[j].color="#000";nextptr>=ptrlen&&(nextptr=0);edges[visedge[nextptr]].color=edges[visedge[nextptr]].defaultcolor;s.refresh();$("#rel-area").empty();$("#rel-area").append("<p><< see <b>"+nodes[visnb[nextptr]].label+" projection</b> ("+(nextptr+1)+"/"+ptrlen+") in left side panel</p>");1<ptrlen&&$("#rel-area").append('<div style="text-align:center"><button id="prev-btn">prev relations</button></div>');
$("#prev-btn").click(function(){nextptr--;nextptr--;0>nextptr&&(nextptr=ptrlen-1);$("#show-btn").click()});updatePane("#minor-pane",nodes[visnb[nextptr]],!1);$("#minor-pane").append("<hr>");$("#minor-pane").append("<p>"+edges[visedge[nextptr]].desc+"</p>");nextptr++}))}}function forceCleanNode(b){nodes=s.graph.nodes();for(j=0;j<nodes.length;j++)nodes[j].color="#666";s.refresh()}
function updateLegendbyNode(b){$("#red-info").html("<b><i>"+b.data.node.name+"</i></b>");$("#green-info").html("<b><i>"+b.data.node.name+"</i></b>");$("#blue-info").html("\u4e0e<b><i>"+b.data.node.name+"</i></b> \u76f8\u5173\u8054\u7684\u5176\u5b83\u6295\u5f71")}function updateLegendbyEdge(b,c){$("#red-info").html("<b><i>"+b.name+"</i></b>");$("#green-info").html("<b><i>"+c.name+"</i></b>")}
function nolegendfornodes(){$("#colorinfo-pane").empty();$("#colorinfo-pane").append("<div id='legend-title'><b>No Legend for Nodes</b></div>")}var sub_categories=new Map;sub_categories.set("developable surfaces","cylindrical pseudocylindrical conic pseudoconic azimuthal lenticular miscellaneous".split(" "));sub_categories.set("distortions",["conformal","equal-area","equidistant","compromise"]);sub_categories.set("aspects (partial)",["normal","transverse","oblique"]);
sub_categories.set("same shape",["2:1 ellipse","other same shapes"]);sub_categories.set("similar shape",["similar shape","(may be) interrupted","Bonne group","cylindrical equal-area family","stretching"]);sub_categories.set("form of parallels",["evenly spaced"]);sub_categories.set("form of meridians",["elliptical","sinusoidal","quartic","parabolic","hyperbolic"]);sub_categories.set("form of poles",["as straight lines","as points"]);
sub_categories.set("combinations",["fusion","blending","construction","Tobler hyperelliptical family"]);sub_categories.set("authors (inc. aliases)","Eckert;Kavrayskiy;Lambert;McBryde or McBT;Putni\u0146\u0161;Siemon;Strebe;Tobler;Wagner;Werenskiold;Winkel;Hufnagel's family".split(";"));
function catReset(){$("#main-pane").empty();$("#minor-pane").empty();filter.undo("categories").nodesBy(function(b){b.type="def";b.color="#666";return!0}).apply();updateCountinfo(101);nolegendfornodes();$("#cat-l1").val("all categories");$("#cat-l2").empty();$("#cat-l2").append("<option>no sub-categories</option>");$("#cat-l2").val("no sub-categories");$("#cat-more").val("== no more filters ==")}
function catChange(){$("#main-pane").empty();$("#minor-pane").empty();nodes=s.graph.nodes();edges=s.graph.edges();sel=$(this).val();for(i=0;i<nodes.length;i++)nodes[i].cat1viz=!0;if("all categories"==sel)$("#cat-l2").empty(),$("#cat-l2").append("<option>no sub-categories</option>"),filter.undo("categories").nodesBy(function(a){return a.cat2viz},"categories").apply();else{var b=sub_categories.get(sel);$("#cat-l2").empty();$("#cat-l2").append("<option>all sub-categories</option>");Object.values(b).forEach(function(a){$("#cat-l2").append("<option>"+
a+"</option>")});var c=0;filter.undo("categories").nodesBy(function(a){var d=!1;for(i=0;i<Object.values(a.attributes).length;i++)Object.values(b).forEach(function(b,c){if("developable surfaces"==sel)if("cylindrical"==a.attributes[i]?(d=!0,a.color=colormap[0]):"conic"==a.attributes[i]?(d=!0,a.color=colormap[1]):"azimuthal"==a.attributes[i]?(d=!0,a.color=colormap[2]):"pseudocylindrical"==a.attributes[i]?(d=!0,a.type="image",a.url="img/r,y.png"):"pseudoconic"==a.attributes[i]?(d=!0,a.type="image",a.url=
"img/g,y.png"):"pseudoazimuthal"==a.attributes[i]?(d=!0,a.type="image",a.url="img/mby.png"):"miscellaneous"==a.attributes[i]?(d=!0,a.color="#000"):"polyhedral"==a.attributes[i]&&(d=!0,a.type="image",a.url="img/icosa.png"),"Aitoff"==a.label||"Wagner 7"==a.label||"Wagner 8"==a.label||"Wagner 9"==a.label)d=!0,a.type="image",a.url=uselent?"img/mbo.png":"img/b,o.png";else if("Hammer"==a.label||"Winkel 3"==a.label)d=!0,a.type="image",a.url=uselent?"img/mbok.png":"img/bok.png";else if("Ortelius Oval"==a.label||
"Apian Globular I"==a.label||"Bacon Globular"==a.label)d=!0,a.type="image",a.url="img/ryk.png";else if("Strebe 1995"==a.label)d=!0,a.type="image",a.url="img/m-o.png";else{if("Ciric I"==a.label||"A4"==a.label||"Dedistort"==a.label)d=!0,a.color="#F0F"}else{"same shape"==sel&&a.attributes[i].startsWith("same shape gp")&&(val=a.attributes[i].substring(13),d=!0,a.type="image",a.url="img/gp"+val+".png");if("similar shape"==sel){a.attributes[i].startsWith("cylindrical equal-area")&&(d=!0,a.type="image",
a.url="img/c,m.png");"Sinusoidal"==a.label&&(d=!0,a.type="image",a.url="img/gpb,g.png");"Boggs eumorphic"==a.label&&(d=!0,a.type="image",a.url="img/g-r.png");"Siemon IV"==a.label&&(d=!0,a.type="image",a.url="img/g-rk.png");if("Putni\u0146\u0161 P1"==a.label||"Putni\u0146\u0161 P2"==a.label)d=!0,a.type="image",a.url="img/gray-r.png";if("Putni\u0146\u0161 P3'"==a.label||"Putni\u0146\u0161 P4'"==a.label)d=!0,a.type="image",a.url="img/gray-ok.png";if("Wagner 1"==a.label||"Wagner 2"==a.label||"Wagner 3"==
a.label)d=!0,a.type="image",a.url="img/gray-o.png"}if("combinations"==sel){if("fusion-src"==a.attributes[i]||"blending-src"==a.attributes[i]||"const-src"==a.attributes[i])d=!0,a.type="def",a.color=colormap[0];if("Hammer"==a.label||"Aitoff"==a.label)a.type="image",a.url="img/r,m.png";"Mollweide"==a.label&&(a.type="image",a.url="img/r,c.png");"Collignon"==a.label&&(a.type="image",a.url="img/c,r.png")}a.attributes[i]==b&&(d=!0,"combinations"==sel?(a.type="def",a.color=colormap[c+1]):"distortions"==sel?
"Sinusoidal"==a.label||"Werner"==a.label?(a.type="image",a.url="img/gpb,g.png"):(a.type="def",a.color=colormap[c]):(a.type="def",a.color=colormap[c]))}});d||(a.cat1viz=!1);d&&a.cat2viz&&c++;return d&&a.cat2viz&&a.yearviz},"categories").apply();updateCountinfo(c);updateColorinfo(sel,b)}}
function subcatChange(){$("#main-pane").empty();$("#minor-pane").empty();sel=$(this).val();for(i=0;i<nodes.length;i++)nodes[i].cat1viz=!0;if("all sub-categories"==sel){parsel=$("#cat-l1").val();var b=sub_categories.get(parsel),c=0;filter.undo("categories").nodesBy(function(a){var d=!1;for(i=0;i<Object.values(a.attributes).length;i++)Object.values(b).forEach(function(b){a.attributes[i]==b&&(d=!0);"combinations"!=parsel||"fusion-src"!=a.attributes[i]&&"blending-src"!=a.attributes[i]&&"const-src"!=a.attributes[i]||
(d=!0);"same shape"==parsel&&a.attributes[i].startsWith("same shape gp")&&(d=!0);"similar shape"!=parsel||"Boggs eumorphic"!=a.label&&"Siemon IV"!=a.label&&"Putni\u0146\u0161 P1"!=a.label&&"Putni\u0146\u0161 P2"!=a.label&&"Putni\u0146\u0161 P3'"!=a.label&&"Putni\u0146\u0161 P4'"!=a.label&&"Wagner 1"!=a.label&&"Wagner 2"!=a.label&&"Wagner 3"!=a.label||(d=!0)});d||(a.cat1viz=!1);d&&a.cat2viz&&c++;return d&&a.cat2viz&&a.yearviz},"categories").apply()}else c=0,filter.undo("categories").nodesBy(function(a){var b=
!1;for(i=0;i<Object.values(a.attributes).length;i++)a.attributes[i]==sel&&(b=!0),"other same shapes"==sel&&a.attributes[i].startsWith("same shape gp")&&(b=!0),"similar shape"!=sel||"Boggs eumorphic"!=a.label&&"Siemon IV"!=a.label&&"Putni\u0146\u0161 P1"!=a.label&&"Putni\u0146\u0161 P2"!=a.label&&"Putni\u0146\u0161 P3'"!=a.label&&"Putni\u0146\u0161 P4'"!=a.label&&"Wagner 1"!=a.label&&"Wagner 2"!=a.label&&"Wagner 3"!=a.label||(b=!0),"fusion"==sel&&"fusion-src"==a.attributes[i]&&(b=!0),"blending"==sel&&
"blending-src"==a.attributes[i]&&(b=!0),"construction"==sel&&"const-src"==a.attributes[i]&&(b=!0);b||(a.cat1viz=!1);b&&a.cat2viz&&c++;return b&&a.cat2viz&&a.yearviz},"categories").apply();updateCountinfo(c)}
function morecatChange(){nodes=s.graph.nodes();edges=s.graph.edges();sel=$(this).val();for(i=0;i<nodes.length;i++)nodes[i].cat2viz=!0;if("== no more filters =="==sel){var b=0;filter.undo("categories").nodesBy(function(c){c.cat1viz&&b++;return c.cat1viz},"categories").apply()}else b=0,filter.undo("categories").nodesBy(function(c){var a=!1;for(i=0;i<Object.values(c.attributes).length;i++)c.attributes[i]==sel&&(a=!0);a||(c.cat2viz=!1);a&&c.cat1viz&&b++;return a&&c.cat1viz&&c.yearviz},"categories").apply();
updateCountinfo(b);s.refresh()}function search(){var b=$(this).val();b=new RegExp(b,"i");$(this).val("");forceCleanNode();nodes=s.graph.nodes();var c=!1;for(j=0;j<nodes.length;j++)b.test(nodes[j].label)&&(nodes[j].color="#c00",c=!0);c?s.refresh():$(this).val("no result found!").select()}
$(document).ready(function(){$("#red-circle").css("background","#c00");$("#blue-circle").css("background","#00c");$("#green-circle").css("background","#0c0");$("#search-pane").css("left",parseInt($("#search-pane").css("right"))/2);$("#search-box").bind("change",search).focus();$("#legend-pane").hide();$("#cat-l1").change(catChange);$("#cat-l2").change(subcatChange);$("#cat-more").change(morecatChange);$("#reset-all").click(catReset);$("#uselent").change(function(){uselent=!uselent;$("#cat-more").empty();
$("#cat-more").append("<option>== no more filters ==</option>");$("#cat-more").append("<option>cylindrical</option>");$("#cat-more").append("<option>pseudocylindrical</option>");$("#cat-more").append("<option>conic</option>");$("#cat-more").append("<option>pseudoconic</option>");$("#cat-more").append("<option>azimuthal</option>");uselent&&$("#cat-more").append("<option>lenticular</option>");$("#cat-more").append("<option>== no more filters ==</option>");$("#cat-more").append("<option>conformal</option>");
$("#cat-more").append("<option>equal-area</option>");$("#cat-more").append("<option>equidistant</option>");$("#cat-more").append("<option>compromise</option>");$("#reset-all").click();uselent?sub_categories.set("developable surfaces","cylindrical pseudocylindrical conic pseudoconic azimuthal lenticular miscellaneous".split(" ")):sub_categories.set("developable surfaces","cylindrical pseudocylindrical conic pseudoconic azimuthal miscellaneous".split(" "))});$("#drawcvco").change(function(){nodes=s.graph.nodes();
edges=s.graph.edges();if(drawcvco=!drawcvco)for(j=0;j<edges.length;j++)edges[j].color=edges[j].defaultcolor;else for(j=0;j<edges.length;j++)edges[j].color="#000";s.refresh()});$(".link").mouseover(function(b){$(".popup-div").not("#"+$(this).attr("id")+"-pane").hide();h=parseInt($(this).attr("height"));$("#"+$(this).attr("id")+"-pane").css({position:"absolute",top:b.pageY-20*h,left:b.pageX+10});$("#"+$(this).attr("id")+"-pane").stop().show()});$(".link").mouseout(function(){$("#"+$(this).attr("id")+
"-pane").stop().fadeOut(4E3)});$(".popup-div").mouseover(function(){$(this).stop().fadeIn();return!1});$(".popup-div").mouseout(function(){$(this).stop().fadeOut(4E3);return!1})});
